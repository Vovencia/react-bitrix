# Bitrix with react

## Как запустить проект:
- Скачать bitrix и установить
- В корень проекта скопировать содержимое данного репозитория
- Чтобы происходил SSR, нужно зайти в папку `.frontend`
через консоль и запустить команду `npm run dev`

## Как работает
- Во внешний мир смотрит только сервер php (bitrix)
- Содержимое страницы буферизируется (`ob_start`),
затем `html` преобразуется в массив объектов (`[
    "type" => "",
    "tag" => "",
    "children" => [],
    "props" => [],
]`), который в свою очередь используется в коде
- Получив содержимое страницы (предыдущий пункт),
создаем объект данных: `[
    "page:title" => "",
    "page:meta" => [],
    "page:content" => [],
    "url" => "",
]`, который и передается ны сервер SSR,
а также этот объект используется при hydrate данных
- Для каждой страницы создается js кэш-файл с данными для hydrate,
который подключается через функционал подключения скриптов bitrix
(т.е. будет работать объединение скриптов на странице и их кэширование браузером)
- Стили из styled-components и scss выносятся в отдельные css файлы,
и подключаются через функционал подключения стилей bitrix

#### TODO:
- ~~Некорректно выводиться навигация~~
- production ssr server
